{"ast":null,"code":"import api from\"../api/axios\";export async function signup(_ref){let{name,email,password,role=\"user\"}=_ref;const res=await api.get(\"/users?email=\".concat(encodeURIComponent(email)));if(res.data.length>0){throw new Error(\"User with that email already exists\");}const newUser={name,email,password,role};const create=await api.post(\"/users\",newUser);return create.data;}export async function signin(_ref2){let{email,password}=_ref2;const res=await api.get(\"/users?email=\".concat(encodeURIComponent(email),\"&password=\").concat(encodeURIComponent(password)));if(res.data.length===0){throw new Error(\"Invalid credentials\");}const user=res.data[0];user.token=\"fake-token-\".concat(user.id,\"-\").concat(Date.now());localStorage.setItem(\"currentUser\",JSON.stringify(user));return user;}export function signout(){localStorage.removeItem(\"currentUser\");}","map":{"version":3,"names":["api","signup","_ref","name","email","password","role","res","get","concat","encodeURIComponent","data","length","Error","newUser","create","post","signin","_ref2","user","token","id","Date","now","localStorage","setItem","JSON","stringify","signout","removeItem"],"sources":["/home/ubuntu/java-script/src/services/auth.js"],"sourcesContent":["import api from \"../api/axios\";\n\nexport async function signup({ name, email, password, role = \"user\" }) {\n  const res = await api.get(`/users?email=${encodeURIComponent(email)}`);\n  if (res.data.length > 0) {\n    throw new Error(\"User with that email already exists\");\n  }\n  const newUser = { name, email, password, role };\n  const create = await api.post(\"/users\", newUser);\n  return create.data;\n}\n\nexport async function signin({ email, password }) {\n  const res = await api.get(\n    `/users?email=${encodeURIComponent(email)}&password=${encodeURIComponent(password)}`\n  );\n  if (res.data.length === 0) {\n    throw new Error(\"Invalid credentials\");\n  }\n  const user = res.data[0];\n  user.token = `fake-token-${user.id}-${Date.now()}`;\n  localStorage.setItem(\"currentUser\", JSON.stringify(user));\n  return user;\n}\n\nexport function signout() {\n  localStorage.removeItem(\"currentUser\");\n}\n"],"mappings":"AAAA,MAAO,CAAAA,GAAG,KAAM,cAAc,CAE9B,MAAO,eAAe,CAAAC,MAAMA,CAAAC,IAAA,CAA2C,IAA1C,CAAEC,IAAI,CAAEC,KAAK,CAAEC,QAAQ,CAAEC,IAAI,CAAG,MAAO,CAAC,CAAAJ,IAAA,CACnE,KAAM,CAAAK,GAAG,CAAG,KAAM,CAAAP,GAAG,CAACQ,GAAG,iBAAAC,MAAA,CAAiBC,kBAAkB,CAACN,KAAK,CAAC,CAAE,CAAC,CACtE,GAAIG,GAAG,CAACI,IAAI,CAACC,MAAM,CAAG,CAAC,CAAE,CACvB,KAAM,IAAI,CAAAC,KAAK,CAAC,qCAAqC,CAAC,CACxD,CACA,KAAM,CAAAC,OAAO,CAAG,CAAEX,IAAI,CAAEC,KAAK,CAAEC,QAAQ,CAAEC,IAAK,CAAC,CAC/C,KAAM,CAAAS,MAAM,CAAG,KAAM,CAAAf,GAAG,CAACgB,IAAI,CAAC,QAAQ,CAAEF,OAAO,CAAC,CAChD,MAAO,CAAAC,MAAM,CAACJ,IAAI,CACpB,CAEA,MAAO,eAAe,CAAAM,MAAMA,CAAAC,KAAA,CAAsB,IAArB,CAAEd,KAAK,CAAEC,QAAS,CAAC,CAAAa,KAAA,CAC9C,KAAM,CAAAX,GAAG,CAAG,KAAM,CAAAP,GAAG,CAACQ,GAAG,iBAAAC,MAAA,CACPC,kBAAkB,CAACN,KAAK,CAAC,eAAAK,MAAA,CAAaC,kBAAkB,CAACL,QAAQ,CAAC,CACpF,CAAC,CACD,GAAIE,GAAG,CAACI,IAAI,CAACC,MAAM,GAAK,CAAC,CAAE,CACzB,KAAM,IAAI,CAAAC,KAAK,CAAC,qBAAqB,CAAC,CACxC,CACA,KAAM,CAAAM,IAAI,CAAGZ,GAAG,CAACI,IAAI,CAAC,CAAC,CAAC,CACxBQ,IAAI,CAACC,KAAK,eAAAX,MAAA,CAAiBU,IAAI,CAACE,EAAE,MAAAZ,MAAA,CAAIa,IAAI,CAACC,GAAG,CAAC,CAAC,CAAE,CAClDC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAEC,IAAI,CAACC,SAAS,CAACR,IAAI,CAAC,CAAC,CACzD,MAAO,CAAAA,IAAI,CACb,CAEA,MAAO,SAAS,CAAAS,OAAOA,CAAA,CAAG,CACxBJ,YAAY,CAACK,UAAU,CAAC,aAAa,CAAC,CACxC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}